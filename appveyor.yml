version: 0.1.{build}
pull_requests:
  do_not_increment_build_number: true
branches:
  only:
  - dev
  - master

image:
- Ubuntu
- Visual Studio 2017

max_jobs: 1

install:
  - pwsh: Install-Module PSDepend -Force

build_script:
  - pwsh: ./build.ps1 -Clean

test_script:
  - pwsh: ./build.ps1 -NoBuild -Test

artifacts:
  - path: package/bin/Debug/Microsoft.Azure.Functions.PowerShell.Worker.0.1.0.nupkg
